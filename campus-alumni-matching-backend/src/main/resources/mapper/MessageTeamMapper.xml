<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.wxl.alumniMatching.mapper.MessageTeamMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="org.wxl.alumniMatching.domain.entity.MessageTeam">
        <id column="id" property="id" />
        <result column="content" property="content" />
        <result column="send_time" property="sendTime" />
        <result column="send_user_id" property="sendUserId" />
        <result column="team_id" property="teamId" />
        <result column="is_delete" property="isDelete" />
    </resultMap>

    <insert id="saveTeamMessage" parameterType="org.wxl.alumniMatching.domain.entity.MessageTeam" useGeneratedKeys="true" keyProperty="id">
        insert into tb_message_team (
                content,send_time,send_user_id,team_id,is_delete
        ) values (#{content},#{sendTime},#{sendUserId},#{teamId},0)
    </insert>
    <select id="selectTeamMessage" resultType="org.wxl.alumniMatching.domain.entity.MessageTeam"
            parameterType="java.lang.Long">
        select id,content,send_user_id
            from tb_message_team
        where
            is_delete = 0 and team_id = #{teamId} and send_time >= DATE_SUB(NOW(), INTERVAL 2 DAY);
    </select>
</mapper>
